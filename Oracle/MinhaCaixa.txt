CREATE DATABASE "MinhaCaixa"

CREATE TABLE  "GRUPO" 
   (	
   "GRUPOCODIGO" 		NUMBER NOT NULL, 
	"GRUPONOME" 		VARCHAR2(50), 
	"GRUPORAZAOSOCIAL" 	VARCHAR2(50), 
	"GRUPOCNPJ" 		VARCHAR2(20), 
	 CONSTRAINT "PK_Grupo" PRIMARY KEY ("GRUPOCODIGO") ENABLE
   );
   
INSERT INTO GRUPO
(GRUPOCODIGO, GRUPONOME, GRUPORAZAOSOCIAL, GRUPOCNPJ)
VALUES
('1', 'MyBank', 'MyBank International SA', '11.222.333/0001-44');
CREATE TABLE  "CLIENTES" 
   (	
    "CLIENTECODIGO" 	NUMBER, 
	"CLIENTENOME" 		VARCHAR2(50), 
	"CLIENTERUA" 		VARCHAR2(50), 
	"CLIENTECIDADE" 	VARCHAR2(50), 
	"CLIENTENASCIMENTO" DATE, 
	 CONSTRAINT "PK_Clientes" PRIMARY KEY ("CLIENTECODIGO") ENABLE
   ) ;

INSERT INTO CLIENTES 
(CLIENTECODIGO, CLIENTENOME, CLIENTERUA, CLIENTECIDADE, CLIENTENASCIMENTO) 
VALUES 
('1', 'Ana', 'XV de Novembro','Joinville','06-08-1980');

INSERT INTO CLIENTES 
(CLIENTECODIGO, CLIENTENOME, CLIENTERUA, CLIENTECIDADE, CLIENTENASCIMENTO) 
VALUES
('2', 'Laura','07 de Setembro','Blumenau','08-08-1981');
INSERT INTO CLIENTES 
(CLIENTECODIGO, CLIENTENOME, CLIENTERUA, CLIENTECIDADE, CLIENTENASCIMENTO) 
VALUES
('3', 'Vania', '01 de Maio', 'Blumenau', '06-08-1982');
INSERT INTO CLIENTES 
(CLIENTECODIGO, CLIENTENOME, CLIENTERUA, CLIENTECIDADE, CLIENTENASCIMENTO) 
VALUES
('4', 'Franco', 'Felipe Schmidt', 'Florianopolis', '06-08-1985');
INSERT INTO CLIENTES 
(CLIENTECODIGO, CLIENTENOME, CLIENTERUA, CLIENTECIDADE, CLIENTENASCIMENTO) 
VALUES
('5', 'Eduardo', 'Beria Mar Norte', 'Florianopolis', '10-11-1970');
INSERT INTO CLIENTES 
(CLIENTECODIGO, CLIENTENOME, CLIENTERUA, CLIENTECIDADE, CLIENTENASCIMENTO) 
VALUES
('6', 'Bruno', '20 de maio', 'Criciuma', '05-07-1982');
INSERT INTO CLIENTES 
(CLIENTECODIGO, CLIENTENOME, CLIENTERUA, CLIENTECIDADE, CLIENTENASCIMENTO) 
VALUES
('7', 'Rodrigo', '06 de agosto', 'Joinville', '06-08-1981');
INSERT INTO CLIENTES 
(CLIENTECODIGO, CLIENTENOME, CLIENTERUA, CLIENTECIDADE, CLIENTENASCIMENTO) 
VALUES
('8', 'Ricardo', 'João Colin', 'Joinville', '15-02-1980');
INSERT INTO CLIENTES 
(CLIENTECODIGO, CLIENTENOME, CLIENTERUA, CLIENTECIDADE, CLIENTENASCIMENTO) 
VALUES
('9', 'Alexandre', 'Margem esquerda', 'Blumenau', '07-03-1980');
INSERT INTO CLIENTES 
(CLIENTECODIGO, CLIENTENOME, CLIENTERUA, CLIENTECIDADE, CLIENTENASCIMENTO) 
VALUES
('10', 'Luciana', 'Estreito', 'Florianopolis', '06-09-1987');
INSERT INTO CLIENTES 
(CLIENTECODIGO, CLIENTENOME, CLIENTERUA, CLIENTECIDADE, CLIENTENASCIMENTO) 
VALUES
('11', 'Juliana', 'Iririu', 'Joinville', '06-01-1970');
INSERT INTO CLIENTES 
(CLIENTECODIGO, CLIENTENOME, CLIENTERUA, CLIENTECIDADE, CLIENTENASCIMENTO) 
VALUES
('12', 'Pedro', 'Aventureiro', 'Joinville', '08-06-1975');
INSERT INTO CLIENTES 
(CLIENTECODIGO, CLIENTENOME, CLIENTERUA, CLIENTECIDADE, CLIENTENASCIMENTO) 
VALUES
('13', 'Julia', 'Nova Brasilia', 'Joinville', '18-03-1985');

CREATE TABLE  "AGENCIAS" 
   (	
    "AGENCIACODIGO" NUMBER, 
	"AGENCIANOME" VARCHAR2(50), 
	"AGENCIACIDADE" VARCHAR2(50), 
	"AGENCIAFUNDOS" NUMBER(19,4), 
	"GRUPOCODIGO" NUMBER, 
	 CONSTRAINT "PK_Agencias" PRIMARY KEY ("AGENCIACODIGO") ENABLE
   ) ;
   ALTER TABLE  "AGENCIAS" ADD CONSTRAINT "FK_GRUPOS_AGENCIAS" FOREIGN KEY ("GRUPOCODIGO") REFERENCES  "GRUPO" ("GRUPOCODIGO") ENABLE;

INSERT INTO AGENCIAS 
(AGENCIACODIGO, AGENCIANOME, AGENCIACIDADE, AGENCIAFUNDOS, GRUPOCODIGO) 
VALUES
('1', 'Verde Vale', 'Blumenau', '900000', '1');
INSERT INTO AGENCIAS 
(AGENCIACODIGO, AGENCIANOME, AGENCIACIDADE, AGENCIAFUNDOS, GRUPOCODIGO) 
VALUES
('2', 'Cidade das Flores', 'Joinville', '800000', '1');
INSERT INTO AGENCIAS 
(AGENCIACODIGO, AGENCIANOME, AGENCIACIDADE, AGENCIAFUNDOS, GRUPOCODIGO) 
VALUES
('3', 'Universitaria', 'Florianopolis', '750000', '1');
INSERT INTO AGENCIAS 
(AGENCIACODIGO, AGENCIANOME, AGENCIACIDADE, AGENCIAFUNDOS, GRUPOCODIGO) 
VALUES
('4', 'Joinville', 'Joinville', '950000', '1');
INSERT INTO AGENCIAS 
(AGENCIACODIGO, AGENCIANOME, AGENCIACIDADE, AGENCIAFUNDOS, GRUPOCODIGO) 
VALUES
('5', 'Beira Mar', 'Florianopolis', '600000', '1');
INSERT INTO AGENCIAS 
(AGENCIACODIGO, AGENCIANOME, AGENCIACIDADE, AGENCIAFUNDOS, GRUPOCODIGO) 
VALUES
('6', 'Criciuma', 'Criciuma', '500000', '1');
INSERT INTO AGENCIAS 
(AGENCIACODIGO, AGENCIANOME, AGENCIACIDADE, AGENCIAFUNDOS, GRUPOCODIGO) 
VALUES
('7', 'Blumenau', 'Blumenau', '1100000', '1');
INSERT INTO AGENCIAS 
(AGENCIACODIGO, AGENCIANOME, AGENCIACIDADE, AGENCIAFUNDOS, GRUPOCODIGO) 
VALUES
('8', 'Germania', 'Blumenau', '400000', '1');



CREATE TABLE CONTAS
( 	"AGENCIACODIGO"  	NUMBER NOT NULL --verificar para colocar auto increment, --NUMBER= Numeros fixos ou de ponto flutuante
	"CONTANUMERO"	 	VARCHAR2(10) CONSTRAINT "PK_Contas" PRIMARY KEY ("AGENCIACODIGO"),  --usa só os espaços que realmente foram utilizados, e nao os bytes reservados
	"CLIENTECODIGO"		NUMBER,
	"CONTASALDO"		VARCHAR2(50),
	"CONTAABERTURA"		DATE,
)
ALTER TABLE "CONTAS" ADD CONSTRAINT "FK_CLIENTES_CONTAS" FOREIGN KEY ("CLIENTECODIGO") REFERENCES "CLIENTES"
ALTER TABLE "CONTAS" ADD CONSTRAINT "FK_AGENCIA_CONTAS" FOREIGN KEY ("AGENCIACODIGO") REFERENCES "AGENCIAS"

INSERT INTO CONTAS
(AGENCIACODIGO, CONTANUMERO, CLIENTECODIGO, CONTASALDO, CONTAABERTURA)
VALUES
(4,'C-401',1,500,'2014-01-01');
INSERT INTO CONTAS
(AGENCIACODIGO, CONTANUMERO, CLIENTECODIGO, CONTASALDO, CONTAABERTURA)
VALUES
(4,'C-402',2,200,'2014-02-27')
INSERT INTO CONTAS
(AGENCIACODIGO, CONTANUMERO, CLIENTECODIGO, CONTASALDO, CONTAABERTURA)
VALUES
(4,'C-403',3,350,'2013-07-21');
INSERT INTO CONTAS
(AGENCIACODIGO, CONTANUMERO, CLIENTECODIGO, CONTASALDO, CONTAABERTURA)
VALUES
(4,'C-404',7,870,'2013-08-11');
INSERT INTO CONTAS
(AGENCIACODIGO, CONTANUMERO, CLIENTECODIGO, CONTASALDO, CONTAABERTURA)
VALUES
(1,'C-101',11,800,'2013-08-03');
INSERT INTO CONTAS
(AGENCIACODIGO, CONTANUMERO, CLIENTECODIGO, CONTASALDO, CONTAABERTURA)
VALUES
(2,'C-201',4,800,'2013-04-12');
INSERT INTO CONTAS
(AGENCIACODIGO, CONTANUMERO, CLIENTECODIGO, CONTASALDO, CONTAABERTURA)
VALUES
(3,'C-301',5,400,'2014-07-04');
INSERT INTO CONTAS
(AGENCIACODIGO, CONTANUMERO, CLIENTECODIGO, CONTASALDO, CONTAABERTURA)
VALUES
(5,'C-501',6,300,'2011-03-23');
INSERT INTO CONTAS
(AGENCIACODIGO, CONTANUMERO, CLIENTECODIGO, CONTASALDO, CONTAABERTURA)
VALUES
(6,'C-601',8,900,'2013-10-12');
INSERT INTO CONTAS
(AGENCIACODIGO, CONTANUMERO, CLIENTECODIGO, CONTASALDO, CONTAABERTURA)
VALUES
(7,'C-701',9,550,'2011-09-02');
INSERT INTO CONTAS
(AGENCIACODIGO, CONTANUMERO, CLIENTECODIGO, CONTASALDO, CONTAABERTURA)
VALUES
(8,'C-801',10,1000,'2007-08-01');


CREATE TABLE "DEVEDORES"
(
 "AGENCIACODIGO"    NUMBER NOT NULL,
   "CLIENTECODIGO"	NUMBER NOT NULL,
   "EMPRESTIMOCODIGO"	VARCHAR2(50),
   "DEVEDORSALDO"	MONEY,
)
ALTER TABLE "DEVEDORES" ADD CONSTRAINT "FK_DEVEDORES_AGENCIA" FOREIGN KEY ("AGENCIACODIGO") REFERENCES "AGENCIAS"
ALTER TABLE "DEVEDORES" ADD CONSTRAINT "FK_DEVEDORES_CONTAS" FOREIGN KEY ("CLIENTECODIGO") REFERENCES "CLIENTES"

INSERT INTO DEVEDORES
(AGENCIACODIGO, CLIENTECODIGO, EMPRESTIMOCODIGO, DEVEDORSALDO)
VALUES
(4,1, 'L-10', 1000);
INSERT INTO DEVEDORES
(AGENCIACODIGO, CLIENTECODIGO, EMPRESTIMOCODIGO, DEVEDORSALDO)
VALUES
(2,4, 'L-20', 500);
INSERT INTO DEVEDORES
(AGENCIACODIGO, CLIENTECODIGO, EMPRESTIMOCODIGO, DEVEDORSALDO)
VALUES
(4,2, 'L-15', 800);
INSERT INTO DEVEDORES
(AGENCIACODIGO, CLIENTECODIGO, EMPRESTIMOCODIGO, DEVEDORSALDO)
VALUES
(4,3, 'L-30', 2000);
INSERT INTO DEVEDORES
(AGENCIACODIGO, CLIENTECODIGO, EMPRESTIMOCODIGO, DEVEDORSALDO)
VALUES
(6,8, 'L-40', 2000);
INSERT INTO DEVEDORES
(AGENCIACODIGO, CLIENTECODIGO, EMPRESTIMOCODIGO, DEVEDORSALDO)
VALUES
(1,11, 'L-35', 2600);
INSERT INTO DEVEDORES
(AGENCIACODIGO, CLIENTECODIGO, EMPRESTIMOCODIGO, DEVEDORSALDO)
VALUES
(4,7, 'L-50', 2300);

CREATE TABLE "CARTAOCREDITO"
( 
	"AGENCIACODIGO" NUMBER(10),
	"CLIENTECODIGO" NUMBER(10),
	"CARTAOCODIGO" VARCHAR2 (20),
	"CARTAOLIMITE" NUMBER
); 
ALTER TABLE "CARTAOCREDITO" ADD CONSTRAINT "FK_CARTAOCREDITO_AGENGIA" FOREIGN KEY ("AGENCIACODIGO") REFERENCES "AGENCIAS"
ALTER TABLE "CARTAOCREDITO" ADD CONSTRAINT "FK_CARTAOCREDITO_CLIENTES" FOREIGN KEY ("CLIENTECODIGO") REFERENCES "CLIENTES"

INSERT INTO DBO.CARTAOCREDITO
SELECT 1, 12, '1111-2222-3333-4444', 1000
FROM DUAL 

INSERT INTO DBO.CARTAOCREDITO 
SELECT 4, 13, '1234-4567-8910-1112', 1000
FROM DUAL 

INSERT INTO DBO.CARTAOCREDITO 
SELECT 4, 7, '2222-3333-4444-5555', 2000
FROM DUAL 